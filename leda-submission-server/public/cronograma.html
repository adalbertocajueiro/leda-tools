<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>LEDA UFCG</title>

	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
        crossorigin="anonymous">
	<script
		src="https://code.jquery.com/jquery-3.3.1.min.js"
		integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
		crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

    <link rel="stylesheet" href="assets/css/leda.css">  
    <link rel="icon" href="favicon.png">
</head>
<body>
<div class="container">
	<div id="accordion">
		<div class="card">
			<div class="card-header" id="headingOne">
			<h5 class="mb-0">
				<button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
					Informações gerais para todas as turmas:
				</button>
			</h5>
			</div>
		
			<div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion">
			<div class="card-body">
				Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
			</div>
			</div>
		</div>
	</div>
<!-------->

<div id="content">
    <ul id="tabs" class="nav nav-tabs" role="tablist" data-tabs="tabs">
		<#assign active = 'true'>
		<#list atividades?keys as ativs>
			<#if active='true'> 
				<li class="nav-item"><a class="nav-link active" href='#t${ativs}' role="tab" data-toggle="tab">Turma ${ativs}</a></li>
				<#assign active='false'>
			<#else>
				<li class="nav-item"><a class="nav-link" href="#t${ativs}" role="tab" data-toggle="tab">Turma ${ativs}</a></li>
			</#if>
		</#list>
		<!-- COLCOAR A GERACAO DESSA LISTA AUTOMATICA ??? >
        <li class="nav-item"><a class="nav-link active" href="#t1" role="tab" data-toggle="tab">Turma 1</a></li>
        <li class="nav-item"><a class="nav-link" href="#t2" role="tab" data-toggle="tab">Turma 2</a></li>
		<li class="nav-item"><a class="nav-link" href="#t3" role="tab" data-toggle="tab">Turma 3</a></li -->
    </ul>
	<#-- Create constructor object -->
	<#assign objectConstructor = "freemarker.template.utility.ObjectConstructor"?new()>
	<#-- Call formatter constructor -->
	<#assign formatter = objectConstructor("java.text.SimpleDateFormat","dd/MM")>
	<#assign formatter2 = objectConstructor("java.text.SimpleDateFormat","dd/MM/yyyy HH:mm")>
    <!-- colocar a hora como tooltip da data -->
	<#assign gray = 'true'>
    <div id="my-tab-content" class="tab-content">
	<#assign active = 'true'>
	  <#list atividades?keys as idTurma>
	    <#if active='true'> 
			<div  role="tabpanel" class="tab-pane fade in active" id="t${idTurma}">
		<#assign active='false'>
		<#else>
			<div  role="tabpanel" class="tab-pane fade" id="t${idTurma}">
		</#if>
            <br>
            <table id="t${idTurma}" class="table table-dark table-hover table-striped table-bordered center">
				<thead class="bg-dark">
					<th class="text-xs-center">Aula</th>
					<th class="text-xs-center">Data</th>
					<th class="text-xs-center">Nome</th>
					<th class="text-xs-center">Descrição</th>
				</thead>
				<tbody>
				<#list atividades[idTurma] as atividade>
					<#if gray == 'true'>
						<tr>
							<td class="text-nowrap text-xs-center" data-toggle="tooltip" data-placement="left" title='Aula ${atividade?index + 1}'>${atividade.id} 
							<td class="text-xs-center" data-toggle="tooltip" data-placement="right" title='Atividade inicia em ${formatter2.format(atividade.dataHora.time)}'>${formatter.format(atividade.dataHora.time)}
							<td class="text-nowrap">
								<#if atividade.id?starts_with("A")>
									${(atividade.nome)!""}
								<#else>
									<#if !(atividade.id?starts_with("RR"))>
										<#if (.now > atividade.dataHora.time?datetime) >
											<a href='requestDownload?id=${atividade.id}' data-toggle="tooltip" data-placement="top" title="Download environment">${(atividade.nome)!""}</a>
										<#else>
											<a href='#' data-toggle="tooltip" data-placement="top" title="Disponível a partir da data e hora de liberação">${(atividade.nome)!""}</a>
										</#if>
									<#else>
										<a href='requestDownload?id=${atividade.id}' data-toggle="tooltip" data-placement="top" title="Download environment">${(atividade.nome)!""}</a>
									</#if>
									<ul>
									<li>Corretor: 
										<#if atividade.corretor??> 
											<span data-toggle="tooltip" data-placement="top" title="${atividade.corretor.email}">${atividade.corretor.nome?split(" ")[0]}</span>
										<#else>
											<font color="red">não atribuído</font>
										</#if>
									<li> <#if atividade.dataHoraLimiteEnvioAtraso??>
											<a href="report?id=${atividade.id}" data-toggle="tooltip" data-placement="right" title='Disponível a partir de ${formatter2.format(atividade.dataHoraLimiteEnvioAtraso.time)}'}>Notas da atividade</a>
										 </#if>
									<li><a class="btn-link" role="button" style="color:blue" onclick="parent.window.location.replace((parent.window.location.href).replace('/menu','/menuCorrecao?id=${atividade.id}'));" data-toggle="tooltip" data-placement="top" title="Reservado para corretores">Correção</a>
									</ul>
								</#if>
								
								
							<td>${atividade.descricao}
								
								<#if (atividade.linksVideoAulas?size>0) >
								<p> Video-aulas:
									<ul>
									<#list atividade.linksVideoAulas as link>
									   <li><a href='${link.url!""}' target="_blank">${link.texto!""}</a></li>
									</#list>
									</ul>
								</#if>
								<p>Monitoria:<br> 
								<#if atividade.monitores??> 
									<ul>
									<#list atividade.monitores as monitor>
										<li>${monitor.nome!""} (${monitor.email!""}) 
									</#list>
									</ul>
								</#if> 
						<#assign gray = 'false'>
					<#elseif gray == 'false'>
						<tr>
							<td class="text-nowrap text-xs-center" data-toggle="tooltip" data-placement="left" title='Aula ${atividade?index + 1}'>${atividade.id}
							<td class="text-xs-center" data-toggle="tooltip" data-placement="right" title='Atividade inicia em ${formatter2.format(atividade.dataHora.time)}'>${formatter.format(atividade.dataHora.time)}
							<td class="text-nowrap">
								<#if atividade.id?starts_with("A")>
									${(atividade.nome)!""}
								<#else>
									<#if !(atividade.id?starts_with("RR"))>
										<#if (.now > atividade.dataHora.time?datetime) >
											<a href='requestDownload?id=${atividade.id}' data-toggle="tooltip" data-placement="top" title="Download environment">${(atividade.nome)!""}</a>
										<#else>
											<a href='#' data-toggle="tooltip" data-placement="top" title="Disponível a partir da data e hora de liberação">${(atividade.nome)!""}</a>
										</#if>
									<#else>
										<a href='requestDownload?id=${atividade.id}' data-toggle="tooltip" data-placement="top" title="Download environment">${(atividade.nome)!""}</a>
									</#if>
																		
									<ul>
									<li>Corretor: 
										<#if atividade.corretor??> 
											<span data-toggle="tooltip" data-placement="top" title="${atividade.corretor.email}">${atividade.corretor.nome?split(" ")[0]}</span>
										<#else>
											<font color="red">não atribuído</font>
										</#if>
									<li> <#if atividade.dataHoraLimiteEnvioAtraso??>
											<a href="report?id=${atividade.id}" data-toggle="tooltip" data-placement="right" title='Disponível a partir de ${formatter2.format(atividade.dataHoraLimiteEnvioAtraso.time)}'}>Notas da atividade</a>
										 </#if>
									<li><a class="btn-link" role="button" style="color:blue" onclick="parent.window.location.replace((parent.window.location.href).replace('/menu','/menuCorrecao?id=${atividade.id}'));" data-toggle="tooltip" data-placement="top" title="Reservado para corretores">Correção</a>
									</ul>								
								</#if>

								<td>${atividade.descricao} 
								<#if (atividade.linksVideoAulas?size>0)>
								<p> Video-aulas:
									<ul>
									<#list atividade.linksVideoAulas as link>
									   <li><a href='${link.url!""}' target="_blank">${link.texto!""}</a></li>
									</#list>
									</ul>
								</#if>
								<p>Monitoria:<br> 
								<#if atividade.monitores??> 
									<ul>
									<#list atividade.monitores as monitor>
										<li>${monitor.nome!""} (${monitor.email!""}) 
									</#list>
									</ul>
								</#if> 
						<#assign gray = 'true'>
					</#if>
				</#list>
				</tbody>
			</table>
        </div>
	  </#list>
	</div>


<script type="text/javascript">
    $('#tabs a').click(function (e) {
		e.preventDefault()
		$(this).tab('show')
	})
</script>  

</div> <!-- container -->
<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
<script>
$(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip();
});
</script>

<script>
  $( function() {
    $( "#accordion" ).accordion({
      collapsible: true,
	  active: false
    });
  } );
</script>
  
<!-- script type="text/javascript" src="https://code.jquery.com/jquery-1.12.3.js"></script -->
</body>
</html>