<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>LEDA UFCG</title>

	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
		crossorigin="anonymous">
	<script
		src="https://code.jquery.com/jquery-3.3.1.min.js"
		integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
		crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
		crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
		crossorigin="anonymous"></script>

	<link rel="stylesheet" href="assets/css/leda.css">  
	<link rel="icon" href="favicon.png">
</head>
<body>
<nav class="navbar header-top fixed-top navbar-expand-lg  navbar-dark bg-dark">
	<span class="navbar-toggler-icon leftmenutrigger"></span>
	<a class="navbar-brand" href="#">Registros de faltas do semestre ${semestre}</a>
	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText"
		aria-expanded="false" aria-label="Toggle navigation">
		<span class="navbar-toggler-icon"></span>
	</button>
	<div class="collapse navbar-collapse" id="navbarText">
		<ul class="navbar-nav animate side-nav">
			<li class="nav-item">
				<a class="nav-link" href="#"> user.name
					<span class="sr-only">(current)</span>
				</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" href="#">user.info</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" href="#">Logout</a>
			</li>
		</ul>
		<ul class="navbar-nav ml-md-auto d-md-flex">
			<li class="nav-item">
				<a class="nav-link" href="/">Home
					<span class="sr-only">(current)</span>
				</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" href="alunos">Estudantes</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" href="cronograma">Cronograma</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" href="config">Configurações</a>
			</li>
			<li class="nav-item dropdown">
				<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true"
				aria-expanded="false">Participação <b class="caret"></b></a> 
				<div class="dropdown-menu">
					<a class="dropdown-item" href="submissoes?showAll=false">Submissões</a>
					<a class="dropdown-item" href="notas">Notas</a>
					<a class="dropdown-item" href="faltas">Faltas</a>
				</div>
			</li>
			<li class="nav-item">
				<a class="nav-link" href="roteirosEspeciais">Roteiros Especiais</a>
			</li>
		</ul>
	</div>
</nav>

<#-- Create constructor object -->
<#assign objectConstructor = "freemarker.template.utility.ObjectConstructor"?new()>
<#-- Call formatter constructor -->
<#assign formatter = objectConstructor("java.text.SimpleDateFormat","dd/MM/yyyy")>

<div class="container" style="max-width:1800px">
	<!-------->
	<div id="content">
		<ul id="tabs" class="nav nav-tabs" role="tablist" data-tabs="tabs">
			<#assign active = 'true'>
			<#list turmas as turma>
				<#if active='true'> 
					<li class="nav-item"><a class="nav-link active" href='#t${turma}' role="tab" data-toggle="tab">Turma ${turma}</a></li>
					<#assign active='false'>
				<#else>
					<li class="nav-item"><a class="nav-link" href="#t${turma}" role="tab" data-toggle="tab">Turma ${turma}</a></li>
				</#if>
			</#list>
		</ul>
		<#assign active = 'true'>
		<div id="my-tab-content" class="tab-content">
			<#list turmas as turma>
				<#if active='true'> 
					<div role="tabpanel" class="tab-pane fade in active" id="t${turma}">
					<#assign active='false'>
				<#else>
					<div  role="tabpanel" class="tab-pane fade" id="t${turma}">
				</#if>
				<div class="pull-xs-12 sheet-download">Download em formato Excel (XLSX) <a href="exportToExcelFaltasSemestre?turma=${turma}"><img src="excel.svg" width="26" data-toggle="tooltip" data-placement="left" title='Download de dados no formato excel (XLSX)'/></a> 
					(a exportação produz uma planilha com todas as atividades e a sumarização final para a disciplina de LEDA)
				</div>
				<table id="t${turma}" class="table table-dark table-hover table-striped table-bordered center">
					<thead class="bg-dark" >
					<th class="text-xs-center">Aluno</th>
					<#list submissoes?keys as id>
						<#assign t = id?keep_after("-")>
						<#assign atividade = atividades[id]>
						<#if t == turma && (.now > atividade.dataHoraLimiteEnvioAtraso.time?datetime) >
							<th class="text-xs-center" data-placement="top" data-toggle="tooltip"  title="${formatter.format(submissoes[id][0].atividade.dataHora.time)}">${id?keep_before("-")}</th>
						</#if>
						<!-- GERAR AS COLUNAS BASEADAS NOS ROTEIROS QUE JA ACONTECERAM -->	
					
					</#list>
					<th class="text-xs-center" data-placement="top" data-toggle="tooltip"  title="Cada dia de falta corresponde a 2 aulas">Total</th>
					</thead>
					<tbody>
					<#list alunos as aluno>
						<#if aluno.turma == turma>
							<tr>
								<td>${aluno.nome}
								<#assign numFaltas = 0>
								<#list submissoes?keys as id>
								<#assign atividade = atividades[id]>
								<#if id?keep_after("-") == turma && (.now > atividade.dataHoraLimiteEnvioAtraso.time?datetime)>
									<#if totalFaltas[aluno.matricula][id]??>
										<#if totalFaltas[aluno.matricula][id]>
											<td class="text-xs-center">
										<#else>
											<td class="text-xs-center" style="color:red">F
											<#assign numFaltas = numFaltas + 2>
										</#if>
									<#else>
										<td class="text-xs-center" style="color:red">F
										<#assign numFaltas = numFaltas + 2>
									</#if>
								</#if>
								</#list>
								<td class="text-xs-center font-weight-bold" <#if (numFaltas > 14)>style="color:red"</#if>>${numFaltas}
						</#if>
					</#list>
					
					</tbody>
				</table>
			</div>
			</#list>
		</div>
	</div> 
</div>

<footer class="page-footer bg-dark">
	<div class="container">
		<div class="footer-copyright font-small text-center py-3">
			Copyright ©
			<script>
				document.write(new Date().getFullYear())
			</script> - Laboratório de Estruturas de Dados - <a href="https://hericlesme.github.io/Portfolio" class="text-muted font-weight-light" target="_blank">Héricles Emanuel.</a>
		</div>
	</div>
</footer>

<script src="scripts/leda.js"></script>

<script type="text/javascript">
	$('#tabs a').click(function (e) {
		e.preventDefault()
		$(this).tab('show');
	});

	$('[role="tabpanel"]').each(function( index ) {
		$(this).addClass('show');
	});
</script>

<script>
$(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip();
});
</script>
</body>
</html>