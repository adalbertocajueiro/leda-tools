<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
<title>Relatório de correção de testes</title>
<!-- Le styles -->
<link href="./tether/1.3.3/css/tether.css" rel="stylesheet">
<link href="./bootstrap/4.0.0/css/bootstrap.css" rel="stylesheet">

<script src="./jquery/3.1.1/jquery.min.js"></script>
<script src="./tether/1.3.3/js/tether.min.js"></script>
<script src="./bootstrap/4.0.0/js/bootstrap.min.js"></script>
</head>

<body>

<div class="container">
<br>
<h4>Relatório de correção para roteiro ${id}</h4>
<br>
<!-------->
<div id="content">
	<ul id="tabs" class="nav nav-tabs" role="tablist" data-tabs="tabs">
		<li class="nav-item"><a class="nav-link active" href='#report' role="tab" data-toggle="tab">Testes</a></li>
		<li class="nav-item"><a class="nav-link" href="#similaridades" role="tab" data-toggle="tab">Similaridades</a></li>
    </ul>
	<#-- Create constructor object -->
	<#assign objectConstructor = "freemarker.template.utility.ObjectConstructor"?new()>
	<#-- Call formatter constructor -->
	<#assign formatter = objectConstructor("java.text.SimpleDateFormat","dd/MM/yyyy HH:mm:ss")>
 	<#assign gray = 'true'>
    <div id="my-tab-content" class="tab-content">
		<div role="tabpanel" class="tab-pane fade in active" id="report">
		<#if report??>
			<br>
			<p>Nome da suite: ${report.testSuiteName}
			<p>Número de testes: ${report.numberOfTests}
			<br>
			<br>
			<table id="report" class="table table-hover table-bordered">
				<thead class="bg-success">
					<th class="text-xs-center">Estudante</th>
					<th class="text-xs-center">Data envio</th>
					<th class="text-xs-center">Passou</th>
					<th class="text-xs-center"><font color="red">Erros</font></th>
					<th class="text-xs-center"><font color="blue">Falhas</font></th>
					<th class="text-xs-center">Pulados</th>
					<th class="text-xs-center">Tempo</th>
					<th class="text-xs-center">Detalhes</th>
						<!-- th class="text-xs-center">Matricula</th -->	
					</thead>
					<tbody>
					<#list report.reportItems as reportItem>
						<#if gray == 'true'>
							<tr class="table-warning">
								<td>${reportItem.studentName} 
								<#if reportItem.mavenOutputLog??>
									<td class="text-xs-center">${formatter.format(reportItem.lastModified)}
								<#else>
									<td class="text-xs-center"> -
								</#if>
								<td class="text-xs-center">${reportItem.totalTests - reportItem.failures - reportItem.skipped}
								<td class="text-xs-center">${reportItem.errors}
								<td class="text-xs-center">${reportItem.failures}
								<td class="text-xs-center">${reportItem.skipped}
								<td class="text-xs-center">${reportItem.time}
								<td>
									<#if reportItem.mavenOutputLog??>
										<#if reportItem.completeReport??>
											<a href="./reports/${id}/${reportItem.generateCompleteReportLink()}">Detailed report.</a>
											<a href="./reports/${id}/${reportItem.generateMavenOutputLink()}">Maven output.</a>
										<#else>
											<font color="red">Possivel erro de compilação.</a>
											<a href="./reports/${id}/${reportItem.generateMavenOutputLink()}">Maven output.</a>
										</#if>
									<#else>
										<font color="red"> Aluno não submeteu.</font>
									</#if>
							<#assign gray = 'false'>
						<#elseif gray == 'false'>
							<tr class="table-info">
								<td>${reportItem.studentName} 
								<#if reportItem.mavenOutputLog??>
									<td class="text-xs-center">${formatter.format(reportItem.lastModified)}
								<#else>
									<td class="text-xs-center"> -
								</#if>
								<td class="text-xs-center">${reportItem.totalTests - reportItem.failures - reportItem.skipped}
								<td class="text-xs-center">${reportItem.errors}
								<td class="text-xs-center">${reportItem.failures}
								<td class="text-xs-center">${reportItem.skipped}
								<td class="text-xs-center">${reportItem.time}
								<td>
									<#if reportItem.mavenOutputLog??>
										<#if reportItem.completeReport??>
											<a href="./reports/${id}/${reportItem.generateCompleteReportLink()}">Detailed report.</a>
											<a href="./reports/${id}/${reportItem.generateMavenOutputLink()}">Maven output.</a>
										<#else>
											<font color="red">Possivel erro de compilação.</a>
											<a href="./reports/${id}/${reportItem.generateMavenOutputLink()}">Maven output.</a>
										</#if>
									<#else>
										<font color="red"> Aluno não submeteu.</font>
									</#if>
							<#assign gray = 'true'>
						</#if>
					</#list>
					</tbody>
			</table>
		<#else>
			<br>
			<h5>Dados de testes ausentes. Provavelmente a atividade ainda não foi corrigida.</h5>
		</#if>
        </div>
		
		<div role="tabpanel" class="tab-pane fade" id="similaridades">
		<#if report??>
			<br>
			<h5>Em construção</h5>
			
		<#else>
			<br>
			<h5>Dados de testes ausentes. Provavelmente a atividade ainda não foi corrigida.</h5>
		</#if>
	</div>


<script type="text/javascript">
    $('#tabs a').click(function (e) {
		e.preventDefault()
		$(this).tab('show')
	})
</script>  

</div> <!-- container -->

<!-- script type="text/javascript" src="https://code.jquery.com/jquery-1.12.3.js"></script -->



</body>
</html>